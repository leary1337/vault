---
создал заметку: 2024-07-23
tags:
  - network
  - protocols
  - "#internetlayer"
---
### Описание

**IP (Internet Protocol)** — это межсетевой протокол сетевого уровня, который используется для объединения сетей, построенных с использованием различных технологий канального уровня. Он обеспечивает универсальный метод адресации и маршрутизации пакетов данных через гетерогенные сети, включая глобальную сеть Интернет.

- **internetworking**: процесс объединения различных сетей.
- **internet**: объединенная сеть или подсеть.
- **Internet**: название самой крупной глобальной объединенной сети.

#### Сервисы, предоставляемые IP:

- **Передача данных**:
    - Без гарантии доставки: IP не гарантирует, что пакет достигнет адресата.
    - Без сохранения порядка следования сообщений: пакеты могут приходить в произвольном порядке.
- **Передача данных без установки соединения**: IP работает по принципу «best effort», не требуя установления соединения перед передачей данных.

#### Основные задачи IP:

- **Объединение сетей**: Обеспечение связности между различными сетями.
- **Маршрутизация**: Определение пути для передачи пакетов к целевому устройству.
- **Качество обслуживания (QoS)**: Управление приоритетом передачи данных и оптимизация использования сетевых ресурсов.

#### Формат заголовка IP-пакета

![](https://i.imgur.com/3X7sitj.png)
- **Версия IP**:
    - **IPv4**: Длина [IP-адреса](../../IP-адреса.md) составляет 4 байта. Существует нехватка адресов, что привело к необходимости перехода на IPv6. IPv4 все еще активно используется.
    - **IPv6**: Длина [IP-адреса](../../IP-адреса.md) составляет 16 байт. Введение IPv6 направлено на решение проблемы нехватки IP-адресов и улучшение функциональности.
    
- **Общая длина**: Общая длина IP-пакета, включая заголовок и данные. Измеряется в байтах, максимальное значение — 65535 байт. На практике длина часто ограничена размером кадра канального уровня (например, 1500 байт для Ethernet).
    
- **Время жизни (TTL, Time To Live)**: Устанавливает максимальное количество времени или число маршрутизаторов (hop), через которые пакет может пройти. Это предотвращает бесконечное циркулирование пакетов в сети.
    
- **Тип протокола**: Поле, указывающее, какой протокол транспортного уровня используется:
    - [TCP](../transport-layer/TCP.md) — 6
    - [UDP](../transport-layer/UDP.md) — 17
    - [ICMP](ICMP.md) — 1
- **Опции**: Дополнительные поля в заголовке IP-пакета для специальных задач:
    - Запись маршрута, временные метки и другие.
    - Заголовок должен быть кратен 32 битам, поэтому поле опций может быть дополнено нулями для выравнивания.

### Краткое содержание

**IP (Internet Protocol)** — это межсетевой протокол сетевого уровня, используемый для объединения сетей, построенных с использованием различных технологий канального уровня. Основные версии: IPv4 и IPv6. ^fcc06b