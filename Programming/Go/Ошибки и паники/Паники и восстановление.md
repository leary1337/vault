---
создал заметку: 2024-07-24
tags:
  - golang
---
### Описание
В Go существуют механизмы для обработки критических ошибок и восстановления программы после их возникновения. Эти механизмы включают `panic` и `recover`. Использование этих функций позволяет управлять ситуациями, которые приводят к необратимым ошибкам, и предпринимать действия по восстановлению программы.

### panic

Функция `panic` используется для инициирования паники в программе, что немедленно прекращает выполнение текущей функции и начинает разворачивание стека вызовов. Это обычно используется для сигнализации о критических ошибках, которые невозможно безопасно обработать.

Пример использования `panic`:
```go
func divide(a, b int) int {
    if b == 0 {
        panic("division by zero")
    }
    return a / b
}
```

### recover

Функция `recover` используется для перехвата паники и восстановления нормальной работы программы. Она может быть вызвана только внутри отложенной функции (defer) и возвращает значение, переданное в `panic`. Если `recover` вызвана вне паники, она возвращает `nil`.

Пример использования `recover`:
```go
func safeDivide(a, b int) (result int) {
    defer func() {
        if r := recover(); r != nil {
            fmt.Println("Recovered from panic:", r)
            result = 0 // Устанавливаем результат в 0 при ошибке
        }
    }()
    result = divide(a, b)
    return
}
```

### Применение panic и recover

Основное применение `panic` и `recover` — это обработка неожиданных или критических ошибок, таких как недопустимые состояния, ошибки низкоуровневого доступа или другие ситуации, которые не могут быть обработаны обычными методами обработки ошибок. Тем не менее, частое использование `panic` и `recover` не рекомендуется, так как они могут затруднить отладку и усложнить понимание программы.

### Краткое содержание

Механизмы `panic` и `recover` в Go позволяют управлять критическими ошибками и восстанавливаться после их возникновения. `panic` используется для инициирования паники в случае фатальных ошибок, а `recover` позволяет перехватить и обработать эти ошибки. Однако частое использование этих функций следует избегать, поскольку это может привести к неясности и затруднить отладку программ.
